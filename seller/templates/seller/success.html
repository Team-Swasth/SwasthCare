{% extends 'base.html' %}

{% block title %}SwasthCare - Success{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header bg-success text-white">
        <h3 class="mb-0">Product Added Successfully!</h3>
    </div>
    <div class="card-body">
        <div class="text-center mb-4">
            <i class="bi bi-check-circle-fill fs-1 text-success"></i>
            <h4 class="mt-3">{{ data.prod_name }} has been added to the database</h4>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-3">
                    <div class="card-header">
                        <h5 class="mb-0">Product Information</h5>
                    </div>
                    <div class="card-body">
                        <table class="table">
                            <tr>
                                <th>Product Name</th>
                                <td>{{ data.prod_name }}</td>
                            </tr>
                            <tr>
                                <th>Product Type</th>
                                <td>{{ data.prod_type }}</td>
                            </tr>
                            <tr>
                                <th>Barcode</th>
                                <td>{{ data.barcode }}</td>
                            </tr>
                            <tr>
                                <th>Price</th>
                                <td>₹{{ data.price }}</td>
                            </tr>
                            <tr>
                                <th>Manufacturing Date</th>
                                <td>{{ data.manufacturing_date }}</td>
                            </tr>
                            <tr>
                                <th>Expiry Date</th>
                                <td>{{ data.expiry.expiry_date }}</td>
                            </tr>
                            <tr>
                                <th>Shelf Life</th>
                                <td>{{ data.expiry.tenure }} months</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card mb-3">
                    <div class="card-header">
                        <h5 class="mb-0">Ingredients & Allergens</h5>
                    </div>
                    <div class="card-body">
                        <h6>Ingredients:</h6>
                        <p>{{ data.ingredients }}</p>
                        
                        {% if data.allergen_info %}
                        <h6 class="mt-3">Allergen Information:</h6>
                        <div class="badge badge-allergen">{{ data.allergen_info }}</div>
                        {% endif %}
                        
                        {% if data.special_diet %}
                        <h6 class="mt-3">Special Diet:</h6>
                        {% for diet in data.special_diet %}
                        <span class="badge badge-diet">{{ diet|title }}</span>
                        {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card mb-3">
            <div class="card-header">
                <h5 class="mb-0">Nutritional Information</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <table class="table">
                            <tr>
                                <th>Energy</th>
                                <td>{{ data.nutritional_info.energy_kcal }} kcal</td>
                            </tr>
                            <tr>
                                <th>Protein</th>
                                <td>{{ data.nutritional_info.protein_g }} g</td>
                            </tr>
                            <tr>
                                <th>Total Fat</th>
                                <td>{{ data.nutritional_info.total_fat_g }} g</td>
                            </tr>
                            <tr>
                                <th>Saturated Fat</th>
                                <td>{{ data.nutritional_info.saturated_fat_g }} g</td>
                            </tr>
                            <tr>
                                <th>Trans Fat</th>
                                <td>{{ data.nutritional_info.trans_fat_g }} g</td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-4">
                        <table class="table">
                            <tr>
                                <th>Carbohydrates</th>
                                <td>{{ data.nutritional_info.carbohydrate_g }} g</td>
                            </tr>
                            <tr>
                                <th>Sugars</th>
                                <td>{{ data.nutritional_info.sugars_g }} g</td>
                            </tr>
                            <tr>
                                <th>Fiber</th>
                                <td>{{ data.nutritional_info.fiber_g }} g</td>
                            </tr>
                            <tr>
                                <th>Cholesterol</th>
                                <td>{{ data.nutritional_info.cholesterol_mg }} mg</td>
                            </tr>
                            <tr>
                                <th>Sodium</th>
                                <td>{{ data.nutritional_info.sodium_mg }} mg</td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-4">
                        <table class="table">
                            <tr>
                                <th>Calcium</th>
                                <td>{{ data.nutritional_info.calcium_mg }} mg</td>
                            </tr>
                            <tr>
                                <th>Iron</th>
                                <td>{{ data.nutritional_info.iron_mg }} mg</td>
                            </tr>
                            <tr>
                                <th>Potassium</th>
                                <td>{{ data.nutritional_info.potassium_mg }} mg</td>
                            </tr>
                            <tr>
                                <th>Vitamin C</th>
                                <td>{{ data.nutritional_info.vitamin_c_mg }} mg</td>
                            </tr>
                            <tr>
                                <th>Vitamin D</th>
                                <td>{{ data.nutritional_info.vitamin_d_mcg }} mcg</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="d-flex justify-content-between mt-4">
            <a href="/seller/upload/" class="btn btn-primary">Add Another Product</a>
            <a href="/" class="btn btn-outline-secondary">Back to Home</a>
        </div>
    </div>
</div>
{% endblock %}

        .navbar {
            background-color: var(--white);
            box-shadow: var(--shadow-sm);
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            color: var(--primary);
            font-size: 1.8rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
            flex: 1;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .success-card {
            background: var(--white);
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            overflow: hidden;
            max-width: 500px;
            width: 100%;
            text-align: center;
            padding: 2.5rem 2rem;
            animation: fadeInUp 0.6s ease-out forwards;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }

        .success-icon svg {
            color: var(--primary);
        }

        .success-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .success-message {
            color: var(--gray);
            font-size: 1.1rem;
            margin-bottom: 2rem;
            line-height: 1.5;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            font-size: 1rem;
            text-align: center;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 2px 4px rgba(8, 156, 123, 0.2);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(8, 156, 123, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
            margin-left: 1rem;
        }

        .btn-outline:hover {
            background: var(--primary-light);
        }

        .btn-icon {
            display: inline-block;
        }

        .footer {
            background: var(--white);
            text-align: center;
            padding: 1.5rem;
            color: var(--gray);
            font-size: 0.875rem;
            margin-top: auto;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        /* Animation keyframes */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(8, 156, 123, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(8, 156, 123, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(8, 156, 123, 0);
            }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--primary);
            opacity: 0.8;
            top: 0;
            animation: confetti-fall 3s ease-in-out infinite;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="logo">
            <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"></path>
            </svg>
            SwasthCare
        </div>
        <div class="nav-links">
            <!-- Navigation links can be added here -->
        </div>
    </nav>

    <div class="container" id="confetti-container">
        <div class="success-card">
            <div class="success-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            </div>
            <h1 class="success-title">Success!</h1>
            <p class="success-message">Your product data has been successfully saved to the database and is now available in the SwasthCare marketplace.</p>
            
            <div class="action-buttons">
                <a href="{% url 'upload_document' %}" class="btn btn-primary">
                    <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    Upload Another Product
                </a>
                <!-- This button could be used to view all products or navigate elsewhere -->
                <a href="#" class="btn btn-outline">
                    <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    View All Products
                </a>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>© 2025 SwasthCare. All rights reserved.</p>
    </footer>

    <script>
        // Create confetti effect
        function createConfetti() {
            const container = document.getElementById('confetti-container');
            const containerWidth = container.offsetWidth;
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                
                // Random position, color, and delay
                confetti.style.left = Math.random() * containerWidth + 'px';
                confetti.style.backgroundColor = getRandomColor();
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                
                container.appendChild(confetti);
                
                // Remove confetti after animation completes
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        function getRandomColor() {
            const colors = [
                'var(--primary-color)', // primary
                'var(--info-color)', // secondary
                'var(--accent-color)', // accent
                'var(--success-color)', // success
                'var(--warning-color)'  // warning
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        // Run confetti on page load
        window.addEventListener('load', function() {
            createConfetti();
            
            // Create additional confetti every few seconds
            setInterval(createConfetti, 2000);
        });
    </script>
</body>

</html>